generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model flock {
  id            Int             @id @default(autoincrement())
  created       DateTime        @default(now())
  name          String
  updated       DateTime        @default(now())
  salt          String
  usersinflocks usersinflocks[]
}

model restaurant {
  id              Int      @id @default(autoincrement())
  name            String?
  node            Int      @unique(map: "Restaurant_node_key")
  lat             Float?
  long            Float?
  city            String?
  housenumber     Int?
  postcode        Int?
  street          String?
  cuisine         String?
  takeaway        String?
  operator        String?
  website         String?
  phone           String?
  openingHours    String?
  brand           String?
  dietKosher      Boolean? @default(false)
  dietHalal       Boolean? @default(false)
  dietDiabetes    Boolean? @default(false)
  dietVegan       Boolean? @default(false)
  dietVegetarian  Boolean? @default(false)
}

model user {
  id            Int       @id @default(autoincrement())
  name          String
  email         String    @unique(map: "User_email_key")
  password      String
  salt          String

  created       DateTime  @default(now())
  updated       DateTime  @default(now())

  usersinflocks usersinflocks[]

  friendsRelation user[]  @relation("friends")
  friends         user[]  @relation("friends")

  @@map("users")
}

model usersinflocks {
  userId     Int
  flockId    Int
  assignedAt DateTime @default(now())
  isFlockLeader Boolean @default(false)
  flock      flock    @relation(fields: [flockId], references: [id], map: "UsersInFlocks_flockId_fkey")
  user       user     @relation(fields: [userId], references: [id], map: "UsersInFlocks_userId_fkey")

  @@id([userId, flockId])
  @@index([flockId], map: "UsersInFlocks_flockId_fkey")
}
